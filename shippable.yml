# Language setting http://docs.shippable.com/ci/languages/node/
language: none

build:
  pre_ci:
    # - docker build -t ci-image:latest -f ./.shippable/ci-image/Dockerfile ./.shippable/ci-image
    - echo `whoami`

  pre_ci_boot:
    # image_name: ci-image
    # image_tag: latest
    # pull: false
    options: "-v /routes:/app"

  ci:
    - cp -R . /app
    - pip install -U docker-compose
    - sleep 10
   ## - ./.shippable/bin/build.sh
  # - ./.shippable/bin/push-to-registry.sh

  post_ci:
     #- ./.shippable/bin/push-to-registry.sh
#    - ./.shippable/bin/run-tests.sh

  on_failure:
#    - ./.shippable/bin/on-failure.sh

  on_success:
#    - ./.shippable/bin/deploy-to-server.sh
#    - ./.shippable/bin/report-to-github.sh
    # - ./.shippable/bin/on-success.sh
    - echo "Successfull !!1"

  cache: false
branches:
  only:
    - master
    - dev-advanced
  except:
    - issue*
integrations:
  # hub:
  #   - integrationName: CIRegistry
  #     type: dockerRegistryLogin
  key:
    - integrationName: test-basic-ssh
      type: sshKey
